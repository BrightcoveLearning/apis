---
title: 'Overview: Forensic Watermarking'
description: "In this topic, you will get a high-level overview of Brightcove's Forensic Watermarking feature."
parent: Forensic Watermarking
layout: staging
---

<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <br/>
  <aside class="bcls-aside bcls-aside--tip">This feature is available for a specific set of customers with access to the Limited Availability phase of Forensic Watermarking.</aside>

  <section class="bcls-section">
    <h2 id="Introduction">Introduction</h2>
    <p>Brightcove has partnered with <a href="https://dtv.nagra.com/nexguard-forensic-watermarking">NAGRA</a> to provide forensic watermarking as a feature in the Video Cloud platform. This will help protect your premium content from piracy and unauthorized content sharing. This feature also helps to quickly identify the source of a content leak, so that action can be taken.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Setup">Setup</h2>
    <p>The following setup is needed to support Brightcove's Forensic Watermarking solution:</p>
    <ol class="bcls-tasklist-restart">
      <li>
        Contact your account manager:
        <ol>
          <li>Make sure your account is enabled for Dynamic Delivery.</li>
          <li>Enable your account for Forensic Watermarking; This is a paid add-on to Video Cloud.</li>
        </ol>
      </li>
      <li>Get your License Key from NAGRA.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="Implementation">Implementation</h2>
    <p>You can implement Forensic Watermarking with either Video Cloud Studio, or you can do it manually using the Brightcove APIs. The methods are detailed in the following sections.</p>
  </section>
  <section class="bcls-section"></section>
    <h2 id="Video_Cloud_Studio">Video Cloud Studio</h2>
    <p>Follow these steps to use Forensic Watermarking with Video Cloud Studio:</p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>Forensic Watermarking is not linked to a specific ingest profile. You can use any Dynamic Delivery or Context Aware Encoding profile.</p>
        <ol>
          <li>In the <strong>Upload</strong> module, select your ingest profile.</li>
          <li>
            <p>Select the <strong>Enable Forensic Watermark</strong> option.</p>
            <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Enable watermarking option" src="/assets/images/general/forensic-watermarking/enable-watermarking.png" />
              <figcaption class="bcls-caption--image">Enable watermarking option</figcaption>
              </figure> 
          </li>
          <li>
          Add the tag <code translate="No">watermarked</code> to the video, as this will make it much easier to identify the videos with forensic watermarking and to <a href="#Analytics_reports">generate analytics reports on them</a>:
          <figure class="bcls-figure">
            <img class="bcls-image" src="/assets/images/general/forensic-watermarking/add-tag.png" alt="Add Tag">
            <figcaption class="bcls-caption--image">Add Tag</figcaption>
          </figure>
          </li>
          <li>
            <p>Drag or browse for you video to start ingestion.</p>
            <aside class="bcls-aside bcls-aside--information">You can ingest or re-transcode the videos that you want to watermark.</aside>
          </li>
        </ol>
      </li>
      <li>Provide Brightcove with your NAGRA License Key. This License Key will be used during transcoding to generate the watermark.</li>
      <li>In the <strong>Media</strong> module, you can enable/disable your videos for watermarking.</li>
      <li>
        <p>Configure your player.</p>
        <p>This is where you will pass the NAGRA watermark token and the User ID to the player. You can use either the Brightcove web player or the Native SDK players:</p>
        <ul>
          <li><a href="https://player.support.brightcove.com/playback/forensic-watermarking-with-bcp.html">Forensic Watermarking with Brightcove Player</a></li>
          <li><a href="https://sdks.support.brightcove.com/features/forensic-watermarking-with-sdks.html">Forensic Watermarking with the Native SDKs</a></li>
          <!-- <li><a href="https://live.support.brightcove.com/general/forensic-watermarking-live.html">Forensic Watermarking with Live Streams</a></li> -->
        </ul>
      </li>
      <li>Play content that has been ingested for Forensic Watermarking.</li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Analytics_reports">Analytics reports</h2>
    <p>Analytics reports on viewers for forensic watermarked videos are available via the <a href="/analytics/index.html">Analytics API</a> only. Reports can be returned in JSON, CSV, or XLXS format</p>
    <aside class="bcls-aside bcls-aside--information language-editable">Note that some of the examples provided below assume that you have added the tag <code translate="No">watermarked</code> to your videos with forensic watermarking. If not, you will need to filter your requests using a <code translate="No">where=video=={video_id}</code> filter (as in the first example).</aside>
    <h3>Example 1: viewers for a video by date</h3>
    <p>For this example, we will query the <code translate="No">video</code>, <code translate="No">viewer</code> and <code translate="No">date</code> dimensions and get the report back in CSV format.</p>
    <h4>Sample request</h4>
<pre><code class="language-http" translate="No">https://analytics.api.brightcove.com/v1/data?accounts=4800266849001&from=2021-06-23&to=2021-06-25&dimensions=date,viewer&limit=10&where=video==70702952720202&fields=video,viewer,video_view&format=csv</code></pre>
    <h4>Response</h4>
<pre><code class="language-csv" translate="No">"date","video","viewer","video_view"
"2021-06-25","70702952720202","3f46037f932b0c5a","1"
"2021-06-24","70702952720202","3f46037f932b0c5a","2"</code></pre>
<p>Note that the <code translate="No">viewer</code> is generated by the Brightcove player based on an SSO ID or device id or unique string based on user-agent and IP. You can also set the viewer identifier - see <a href="https://player.support.brightcove.com/playback/xdr-with-bcplayer.html#Set_the_user_identifier">this topic</a> for information on how to do that. Your identifier will be based on information that can be retrieved via JavaScript.</p>
    <h3>Example 2: viewer count</h3>
    <p>In this example, we will assume that all videos with forensic watermarking have the tag <code translate="No">watermarked</code>. We will again query the <code translate="No">video</code>, <code translate="No">viewer</code> and <code translate="No">date</code> dimensions and just return one item, as it is the summary we are interested in here:</p>
    <h4>Sample request</h4>
<pre><code class="language-http" translate="No">https://analytics.api.brightcove.com/v1/data?accounts=4800266849001&from=2021-06-23&to=2021-06-25&dimensions=date,viewer&limit=1&where=video.q==tags:watermarked</code></pre>
    <h4>Response</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "item_count": 7,
  "items": [
    {
      "date": "2021-06-25",
      "viewer": "07B1489C-5786-400E-945B-ABB3559B3897",
      "video_view": 1
    }
  ],
  "summary": {
    "video_view": 25
  }
}</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="APIs">APIs</h2>
    <p>Here are the APIs and fields related to Forensic Watermarking:</p>
    <h3><a href="https://zencoder.support.brightcove.com/index.html">Zencoder</a></h3>
      <p>To generate outputs with forensic watermarking in Zencoder, you need to specify 2 outputs per video, an output <strong translate="no">A</strong> and <strong translate="no">B</strong>.</p>
      <h4>Sample request (outputs only)</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "output": [
      {
          "base_url": "s3://urlTest",
          "filename": "contextAwareEncoding1_A.m4f",
          "public": false,
          "format": "m4f",
          "label": "m4f-contextAwareEncoding1-A-b30e1",
          "generate_mp4_atom_map": true,
          "Mp4_atom_map_filename": "contextAwareEncod-A-atom_map.json",
          "skip_audio": true,
          <span class="bc-highlight">"forensic_watermark": "A"</span>,
          "dynamic_profile_rendition": 1,
          "skip": {
              "require_video": true
          },
          "fragment_duration": 2000,
          "segment_seconds": 2,
          "headers": {
              "x-amz-server-side-encryption": "AES256"
          }
      },
      {         
          "base_url": "s3://urlTest",
          "filename": "contextAwareEncoding1_B.m4f",
          "public": false,
          "format": "m4f",
          "label": "m4f-contextAwareEncoding1-B-e348",
          "generate_mp4_atom_map": true,
          "mp4_atom_map_filename": "contextAwareEncod-B-atom_map.json",
          "skip_audio": true,
          <span class="bc-highlight">"forensic_watermark": "B"</span>,
          "dynamic_profile_rendition": 1,
          "skip": {
              "require_video": true
          },
          "fragment_duration": 2000,
          "segment_seconds": 2,
          "headers": {
              "x-amz-server-side-encryption": "AES256"
          }
      }
  ]
}</code></pre>
    <h4>Visible watermarks for testing</h4>
    <p>For testing purposes, to verify that forensic watermarking is present, you can force visible forensic watermarking by adding <code translate="No">"forensic_watermark_stub_mode":true</code> to outputs as shown in the sample below:</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "output": [
      {
          "base_url": "s3://urlTest",
          "filename": "contextAwareEncoding1_A.m4f",
          "public": false,
          "format": "m4f",
          "label": "m4f-contextAwareEncoding1-A-b30e1",
          "generate_mp4_atom_map": true,
          "Mp4_atom_map_filename": "contextAwareEncod-A-atom_map.json",
          "skip_audio": true,
          <span class="bc-highlight">"forensic_watermark": "A"</span>,
          <span class="bc-highlight">"forensic_watermark_stub_mode":true</span>,
          "dynamic_profile_rendition": 1,
          "skip": {
              "require_video": true
          },
          "fragment_duration": 2000,
          "segment_seconds": 2,
          "headers": {
              "x-amz-server-side-encryption": "AES256"
          }
      },
      {         
          "base_url": "s3://urlTest",
          "filename": "contextAwareEncoding1_B.m4f",
          "public": false,
          "format": "m4f",
          "label": "m4f-contextAwareEncoding1-B-e348",
          "generate_mp4_atom_map": true,
          "mp4_atom_map_filename": "contextAwareEncod-B-atom_map.json",
          "skip_audio": true,
          <span class="bc-highlight">"forensic_watermark": "B"</span>,
          <span class="bc-highlight">"forensic_watermark_stub_mode":true</span>,
          "dynamic_profile_rendition": 1,
          "skip": {
              "require_video": true
          },
          "fragment_duration": 2000,
          "segment_seconds": 2,
          "headers": {
              "x-amz-server-side-encryption": "AES256"
          }
      }
  ]
}</code></pre>
    <h3><a href="/dynamic-ingest/index.html">Dynamic Ingest API</a></h3>
    <p>Once an account is enabled for forensic watermarking, you can add forensic watermarking to a video by adding the <code translate="No">forensic_watermarking</code> field to your ingest request, and setting it to <code translate="No">true</code>. This can be done for the original ingestion, replacing, or retranscoding the video.</p>
    <h4>Sample request body</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "master": {
          "url": "http://solutions.brightcove.com/video/Walking_Dead_609.mp4",
          "audio_tracks": [
              {
                  "language": "en",
                  "variant": "main"
              }
          ]
      },
    "profile": "multi-platform-standard-static-with-mp4",
    <span class="bc-highlight">"forensic_watermarking": true,</span>
    "capture-images": true
}</code></pre>
    <p>There is also a <code translate="No">forensic_watermarking_stub_mode</code> flag which, when set to <code translate="No">true</code> produces visible forensic watermarks:</p>
    <figure class="bcls-figure">
      <img class="bcls-image" src="/assets/images/general/forensic-watermarking/visible-watermarks.png" alt="Visible Forensic Watermarks">
      <figcaption class="bcls-caption--image">Visible Forensic Watermarks</figcaption>
    </figure>
    <aside class="bcls-aside bcls-aside--information language-editable">Note that <code translate="No">forensic_watermarking_stub_mode</code> can only be set using the Dynamic Ingest API. You cannot set it using the Upload module.</aside>
    <p><code translate="No">forensic_watermarking</code> must also be set to <code translate="no">true</code> to enable visible watermarks.</p>
    <p>Use visible watermarks on a video to test integrations. Once that you have verified that the forensic watermarks are present, you will want to remove them to have only invisible forensic watermarks. To do this, you will need to submit another Dynamic Ingest request to retranscode the video, this time setting <code translate="No">forensic_watermarking_stub_mode</code> to <code translate="No">false</code>.</p>
    <h4>Sample request body for visible forensic watermarks</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "master": {
          "url": "http://solutions.brightcove.com/video/Walking_Dead_609.mp4",
          "audio_tracks": [
              {
                  "language": "en",
                  "variant": "main"
              }
          ]
      },
    "profile": "multi-platform-standard-static-with-mp4",
    <span class="bc-highlight">"forensic_watermarking": true,</span>
    <span class="bc-highlight">"forensic_watermarking_stub_mode": true,</span>
    "capture-images": true
}</code></pre>
    <h4>Sample request body to remove visible forensic watermarks</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
    "profile": "multi-platform-standard-static-with-mp4",
    <span class="bc-highlight">"forensic_watermarking": true,</span>
    <span class="bc-highlight">"forensic_watermarking_stub_mode": false,</span>
    "capture-images": true
}</code></pre>
    
    <h3><a href="/cms/index.html">CMS API</a></h3>
    <p>By default, forensic watermarked renditions will be delivered if forensic watermarking was requested during ingestion. You can disable this using a video update request to the CMS API and setting <code translate="No">forensic_watermarking</code> to <code translate="No">INACTIVE</code>. To enable delivery of forensic watermarked renditions again, send another update request setting <code translate="No">forensic_watermarking</code> to <code translate="No">ACTIVE</code>.</p>
    <p>For accounts not enable for forensic watermarking, <code translate="No">forensic_watermarking</code> will be <code translate="No">null</code> and not included in API responses</p>
    <h4>Sample request body</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "forensic_watermarking": "INACTIVE"
}</code></pre>

    <h3>Playback API</h3>
    <p>The Playback API GET video responses will also contain the <code translate="No">forensic_watermarking</code> (if the account is enabled for forensic watermarking). If the value is <code translate="No">ACTIVE</code>, renditions with forensic watermarks will be delivered as sources to the player. Otherwise, non-watermarked renditions will be delivered.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Limitations">Limitations</h2>
    <ul>
      <li>Only VOD is supported at this time. Forensic watermarking for Live streams is not supported.</li>
      <li>Videos must be at least five minutes long to have forensic watermarking applied.</li>
      <li>This feature requires a NAGRA License Key.</li>
      <li>You must use Brightcove's CDN. BYO CDN is not supported.</li>
      <!-- <li>You are responsible for generating and managing the tokens used to identify each viewer.</li> -->
      <li>Brightcove will not handle detection analysis. For this, contact NAGRA.</li>
    </ul>
  </section>
</article>